#: import sm kivy.uix.screenmanager
#:import Factory kivy.factory.Factory


<ActionSpinnerOptions@SpinnerOption>
    background_color: .4, .4, .4, 1
<ActionSpinner@Spinner+ActionItem>
    canvas.before:
        Color:
            rgba: 0.128, 0.128, 0.128, 1
        Rectangle:
            size: self.size
            pos: self.pos
    border: 27, 20, 12, 12
    background_normal: 'atlas://data/images/defaulttheme/action_group'
    option_cls: Factory.ActionSpinnerOptions
#<CustomScreenManager>:
#    id: sm

BoxLayout:
    orientation: 'vertical'
    canvas.before:
        Color:
            rgb: .6, .6, .6
        Rectangle:
            size: self.size
            source: 'res/background.png'

    ActionBar:
        #pos_hint: {'top':1}
        #size_hint: 1, 0.5
        height: 40
        ActionView:
            use_separator: True
            ActionPrevious:
                id: previousid
                important: True

                title: app.set_time(0)
                on_press: sm.transition.direction = 'right'
                on_release:
                    sm.current = 'home'
                    spnr.text = 'Home'
                with_previous: True
                #with_previous: (False if sm and sm.current_screen and sm.current_screen == 'home' else True)
                #with_previous: app.set_previous()
                #app_icon: 'atlas://data/images/defaulttheme/previous_normal'
                app_icon_width: 0.1
            ActionSpinner:
                id: spnr
                size_hint: 0.6, 1
                important: False
                values: app.screen_names
                on_text: app.set_screen()
    CustomScreenManager:
        id: sm


<HomeScreen>:
    name: 'home'
    BoxLayout:
        orientation: 'vertical'
        Button:
            size_hint: 1,0.25
            text: 'dropdown'
        Image:
            size_hint: 1,2.5
            source: 'res/testgraph.jpg'
        BoxLayout:
            orientation: 'horizontal'
            Button:
                text: 'average'
            Button:
                text: 'deviation'
            Button:
                text: 'average'
<DataScreen>:
    name: 'data'
    ScrollView:
        GridLayout:
            id: layout
            cols: 3
            size_hint_y: None
            height: self.minimum_height
            canvas:
                Color:
                    #rgba: (1, 0, 0, .5) # DarkOliveGreen
                    rgb: (.3,.3,.3)
                Rectangle:
                    size: self.size
                    pos: self.pos
            #Label:
            #    id: bust
            #    text: 'a string that is long ' * 10
            #    font_size: 50
            #    text_size: self.width, None
            #    size_hint_y: None
            #    height: self.texture_size[1]
            #    canvas:
            #        Color:
            #            rgba: (0, 1, 0, .5) # DarkOliveGreen
            #        Rectangle:
            #            size: self.size
            #            pos: self.pos
            #Label:
            #    text: '2 strings that are long ' * 10
            #    text_size: self.width, None
            #    size_hint_y: None
            #    height: self.texture_size[1]
            #Button:
            #    text: 'just testing'
<BGScreen>:
    name: 'bgtest'

    BoxLayout:
        orientation: 'vertical'

        ProgressBar:
            id: pb
            max: 100
        Button:
            text: 'This is where you\'ll test BG'
            font_size: 20
            on_release: root.start_pb()#app.opendropdown()
<SettingsScreen>:
    name: 'settings'
    ScrollView:
        #effect_cls: DampedScollEffect
        do_scroll_x: False
        BoxLayout:
            orientation: 'vertical'
            Button:
                text: 'setting 1'
            Button:
                text: 'setting 2'
            Button:
                text: 'setting 3'
            Button:
                text: 'setting 4'
            Button:
                text: 'setting 5'
<ExtrasScreen>:
    name: 'extras'
    BoxLayout:
        orientation: 'vertical'
        Button:
            size_hint: 1,.5
            text: 'Extras!'
            on_release: app.flappy()
        Button:


