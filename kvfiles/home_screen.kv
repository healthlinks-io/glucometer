
<HomeScreen>:
    name: 'home'
    BoxLayout:
        orientation: 'vertical'
        padding: 0,3
        BoxLayout:
            id: dateselectid
            size_hint: 1,0.27
            padding: 3,0
            #Button:
            #    text: '9/19/16'
            #Button:
            #    text: '9/26/16'
        Graph:
            size_hint: 1,2.5
            id: graphid
            #source: 'res/testgraph.jpg'
            xLabel: 'X'
            yLabel: 'mg/dL'
            x_ticks_minor: 0
            x_ticks_major: 25
            y_ticks_major: 25
            y_grid_label: True
            x_grid_label: True
            background_color: 1,1,1,0
            padding: 10
            x_grid: True
            y_grid: False
            xmin: 1
            xmax: 30
            ymin: 45
            ymax: 150
                
        BoxLayout:
            orientation: 'horizontal'
            BoxLayout:
                orientation: 'vertical'
                Label:
                    id: average_lbl
                    font_size: 25
                    text: '--'
                Label:
                    size_hint_y: 0.3
                    font_size: 10
                    text: 'BG Average'

            BoxLayout:
                orientation: 'vertical'
                Label:
                    id: deviation_lbl
                    font_size: 25
                    text: '--'
                Label:
                    size_hint_y: 0.3
                    font_size: 10
                    text: 'Deviation'

            BoxLayout:
                orientation: 'vertical'
                Label:
                    id: carbs_lbl
                    font_size: 25
                    text: '--'
                Label:
                    size_hint_y: 0.3
                    font_size: 10
                    text: 'Avg Carbs/Day'
 
    
        Button:
            size_hint: 1, 0.5
            text: 'New Entry'
            on_release:
                app.open_new_entry_popup()
        Button:
            size_hint_y: 0.3
            text: 'test keyboard'
            on_release: root.test_keyboard()

<NewEntryPopup>:
    size: 200, 250
    size_hint: None, None
    title: 'New Entry'
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            size_hint_y: 1.78
            BoxLayout:
                orientation: 'vertical'
                Label:
                    text: 'Date'
                TextInput:
                    id: date
                    multiline: False
                    text: '10/17/16'
            BoxLayout:
                orientation: 'vertical'
                Label:
                    text: 'Time'
                TextInput:
                    id: time
                    multiline: False
                    text: '11:30'

        BoxLayout:
            size_hint_y: 1.9
            BoxLayout:
                orientation: 'vertical'
                Label:
                    text: 'Bg'
                TextInput:
                    id: bg
                    multiline: False
                    # A really messy char limit + only numbers
                    input_filter: (lambda text, from_undo: str(text[:3 - len(self.text)]).translate(None, 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ/=-:;][!@#$%^&*(){}\\\'\".,'))
            BoxLayout:
                orientation: 'vertical'
                Label:
                    text: 'Carbs'
                TextInput:
                    id: carbs
                    multiline: False
                    # A really messy char limit + only numbers
                    input_filter: (lambda text, from_undo: str(text[:3 - len(self.text)]).translate(None, 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ/=-:;][!@#$%^&*(){}\\\'\".,'))
            BoxLayout:
                orientation: 'vertical'
                Label:
                    text: 'Bolus'
                TextInput:
                    id: bolus
                    multiline: False
                    # A really messy char limit + only numbers
                    input_filter: (lambda text, from_undo: str(text[:2 - len(self.text)]).translate(None, 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ/=-:;][!@#$%^&*(){}\\\'\".,'))
        Label:
            text: 'Notes'
            size_hint_y: .8
        TextInput:
            id: notes
            multiline: False
            input_filter: (lambda text, from_undo: text[:100 - len(self.text)])
        Button:
            text: "submit"
            on_release:
                root.submit()
